(function(e,t){if(typeof exports==="object"){module.exports=t()}else if(typeof define==="function"&&define.amd){define("salvattore",[],t)}else{e.salvattore=t()}})(this,function(){window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;t.type="text/css";t.id="matchmediajs-test";n.parentNode.insertBefore(t,n);r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle;e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";if(t.styleSheet){t.styleSheet.cssText=n}else{t.textContent=n}return r.width==="1px"}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}());(function(){if(window.matchMedia&&window.matchMedia("all").addListener){return false}var e=window.matchMedia,t=e("only all").matches,n=false,r=0,i=[],s=function(t){clearTimeout(r);r=setTimeout(function(){for(var t=0,n=i.length;t<n;t++){var r=i[t].mql,s=i[t].listeners||[],o=e(r.media).matches;if(o!==r.matches){r.matches=o;for(var u=0,a=s.length;u<a;u++){s[u].call(window,r)}}}},30)};window.matchMedia=function(r){var o=e(r),u=[],a=0;o.addListener=function(e){if(!t){return}if(!n){n=true;window.addEventListener("resize",s,true)}if(a===0){a=i.push({mql:o,listeners:u})}u.push(e)};o.removeListener=function(e){for(var t=0,n=u.length;t<n;t++){if(u[t]===e){u.splice(t,1)}}};return o}})();(function(){var e=0;var t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n){window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(t,n){var r=(new Date).getTime();var i=Math.max(0,16-(r-e));var s=window.setTimeout(function(){t(r+i)},i);e=r+i;return s};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(e){clearTimeout(e)}})();var e=function(e,t,n){"use strict";var r={},i=[],s=function(e,t,n){if(e.dataset){e.dataset[t]=n}else{e.setAttribute("data-"+t,n)}return};r.obtain_grid_settings=function(n){var r=e.getComputedStyle(n,":before"),i=r.getPropertyValue("content").slice(1,-1),s=i.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),o,u;if(s){o=s[1];u=s[2];u=u?u.split("."):["column"]}else{s=i.match(/^\s*\.(.+)\s+(\d+)\s*$/);u=s[1];o=s[2];if(o){o=o.split(".")}}return{numberOfColumns:o,columnClasses:u}};r.add_columns=function(n,i){var o=r.obtain_grid_settings(n),u=o.numberOfColumns,a=o.columnClasses,f=new Array(+u),l=t.createDocumentFragment(),c=u,h;while(c--!==0){h="[data-columns] > *:nth-child("+u+"n-"+c+")";f.push(i.querySelectorAll(h))}f.forEach(function(n){var r=t.createElement("div"),i=t.createDocumentFragment();r.className=a.join(" ");Array.prototype.forEach.call(n,function(t){i.appendChild(t)});r.appendChild(i);l.appendChild(r)});n.appendChild(l);s(n,"columns",u)};r.remove_columns=function(r){var i=t.createRange();i.selectNodeContents(r);var o=Array.prototype.filter.call(i.extractContents().childNodes,function(n){return n instanceof e.HTMLElement});var u=o.length,a=o[0].childNodes.length,f=new Array(a*u);Array.prototype.forEach.call(o,function(t,n){Array.prototype.forEach.call(t.children,function(t,r){f[r*u+n]=t})});var l=t.createElement("div");s(l,"columns",0);f.filter(function(t){return!!t}).forEach(function(t){l.appendChild(t)});return l};r.recreate_columns=function(n){e.requestAnimationFrame(function(){r.add_columns(n,r.remove_columns(n))})};r.media_query_change=function(t){if(t.matches){Array.prototype.forEach.call(i,r.recreate_columns)}};r.get_css_rules=function(t){var n;try{n=t.sheet.cssRules||t.sheet.rules}catch(r){return[]}return n||[]};r.get_stylesheets=function(){return Array.prototype.concat.call(Array.prototype.slice.call(t.querySelectorAll("style[type='text/css']")),Array.prototype.slice.call(t.querySelectorAll("link[rel='stylesheet']")))};r.media_rule_has_columns_selector=function(t){try{var n=t.length,r}catch(i){var n=0,r}while(n--){r=t[n];if(r.selectorText&&r.selectorText.match(/\[data-columns\](.*)::?before$/)){return true}}return false};r.scan_media_queries=function(){var n=[];if(!e.matchMedia){return}r.get_stylesheets().forEach(function(i){Array.prototype.forEach.call(r.get_css_rules(i),function(i){if(i.media&&r.media_rule_has_columns_selector(i.cssRules)){n.push(e.matchMedia(i.media.mediaText))}})});n.forEach(function(t){t.addListener(r.media_query_change)})};r.next_element_column_index=function(t,n){var r=t.children,i=r.length,s=0,o,u,a,f=0;for(a=0;a<i;a++){o=r[a];u=o.children.length+n[a].children.length;if(s===0){s=u}if(u<s){f=a;s=u}}return f};r.create_list_of_fragments=function(n){var r=new Array(n),i=0;while(i!==n){r[i]=t.createDocumentFragment();i++}return r};r.append_elements=function(t,n){var i=t.children,s=i.length,o=r.create_list_of_fragments(s);n.forEach(function(n){var i=r.next_element_column_index(t,o);o[i].appendChild(n)});Array.prototype.forEach.call(i,function(t,n){t.appendChild(o[n])})};r.prepend_elements=function(n,i){var s=n.children,o=s.length,u=r.create_list_of_fragments(o),a=o-1;i.forEach(function(t){var n=u[a];n.insertBefore(t,n.firstChild);if(a===0){a=o-1}else{a--}});Array.prototype.forEach.call(s,function(t,n){t.insertBefore(u[n],t.firstChild)});var f=t.createDocumentFragment(),l=i.length%o;while(l--!==0){f.appendChild(n.lastChild)}n.insertBefore(f,n.firstChild)};r.register_grid=function(o){if(e.getComputedStyle(o).display==="none"){return}var u=t.createRange();u.selectNodeContents(o);var a=t.createElement("div");a.appendChild(u.extractContents());s(a,"columns",0);r.add_columns(o,a);i.push(o)};r.init=function(){var n=t.createElement("style");n.innerHTML="[data-columns]::before{visibility:hidden;position:absolute;font-size:1px;}";t.head.appendChild(n);var i=t.querySelectorAll("[data-columns]");Array.prototype.forEach.call(i,r.register_grid);r.scan_media_queries()};r.init();return{append_elements:r.append_elements,prepend_elements:r.prepend_elements,register_grid:r.register_grid}}(window,window.document);return e})